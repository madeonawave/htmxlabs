<!-- Tabbed Interface Example with HTMX -->

<div class="box" style="position: relative;">
    <!-- Copy button in top right -->
    <div style="position: absolute; top: 1rem; right: 1rem;">
        <button type="button"
                class="button is-small is-light btn-clipboard"
                title="Copy to clipboard"
                onclick="copyClipboardContent(this)">
            <span class="icon is-small"><i class="fas fa-copy"></i></span>
            <span>Copy</span>
        </button>
    </div>
    <h3 class="title is-4 mb-3">Tabbed Interface</h3>
    <p>
        Switch between tabs to load content dynamically.
        Content gets loaded from the server without a page-refresh.
    </p>
    <div class="tabs is-boxed is-medium bd-clipboard" id="tabbed-interface-tabs">
        <ul>
            <li class="is-active">
                <a href="#" hx-get="/demo/tab-content?tab=overview" hx-target="#tab-content" hx-swap="innerHTML" hx-push-url="false" data-tab="overview">Overview</a>
            </li>
            <li>
                <a href="#" hx-get="/demo/tab-content?tab=details" hx-target="#tab-content" hx-swap="innerHTML" hx-push-url="false" data-tab="details">Details</a>
            </li>
            <li>
                <a href="#" hx-get="/demo/tab-content?tab=settings" hx-target="#tab-content" hx-swap="innerHTML" hx-push-url="false" data-tab="settings">Settings</a>
            </li>
        </ul>
    </div>
    <div id="tab-content"
         hx-get="/demo/tab-content?tab=overview"
         hx-trigger="load"
         hx-target="this"
         hx-swap="innerHTML">
        <!-- Initial tab content will be loaded here via HTMX -->
        <div class="has-text-centered p-4">
            <span class="icon is-large"><i class="fas fa-spinner fa-spin fa-2x"></i></span>
            <p>Loading tab...</p>
        </div>
    </div>
</div>
<script>
// Use event delegation to handle tab switching even after HTMX swaps
document.body.addEventListener('click', function(e) {
    var a = e.target.closest('#tabbed-interface-tabs a[data-tab]');
    if (!a) return;
    var tabs = document.getElementById('tabbed-interface-tabs');
    if (!tabs) return;
    // Remove is-active from all
    tabs.querySelectorAll('li').forEach(function(li) {
        li.classList.remove('is-active');
    });
    // Add is-active to clicked
    a.closest('li').classList.add('is-active');
});
</script>